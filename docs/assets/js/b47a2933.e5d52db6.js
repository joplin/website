"use strict";(self.webpackChunk_joplin_doc_builder=self.webpackChunk_joplin_doc_builder||[]).push([[1055],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return c}});var i=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e,n){if(null==e)return{};var t,i,o=function(e,n){if(null==e)return{};var t,i,o={},l=Object.keys(e);for(i=0;i<l.length;i++)t=l[i],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)t=l[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var p=i.createContext({}),s=function(e){var n=i.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},u=function(e){var n=s(e.components);return i.createElement(p.Provider,{value:n},e.children)},g="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},d=i.forwardRef((function(e,n){var t=e.components,o=e.mdxType,l=e.originalType,p=e.parentName,u=a(e,["components","mdxType","originalType","parentName"]),g=s(t),d=o,c=g["".concat(p,".").concat(d)]||g[d]||m[d]||l;return t?i.createElement(c,r(r({ref:n},u),{},{components:t})):i.createElement(c,r({ref:n},u))}));function c(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var l=t.length,r=new Array(l);r[0]=d;var a={};for(var p in n)hasOwnProperty.call(n,p)&&(a[p]=n[p]);a.originalType=e,a[g]="string"==typeof e?e:o,r[1]=a;for(var s=2;s<l;s++)r[s]=t[s];return i.createElement.apply(null,r)}return i.createElement.apply(null,t)}d.displayName="MDXCreateElement"},5640:function(e,n,t){t.r(n),t.d(n,{assets:function(){return p},contentTitle:function(){return r},default:function(){return m},frontMatter:function(){return l},metadata:function(){return a},toc:function(){return s}});var i=t(87462),o=(t(67294),t(3905));const l={sidebar_label:"Debugging mobile plugins",title:"Debugging mobile plugins",description:"Running on web Plugins can be installed from .jpl files in the web build of the mobile app. This can help with mobile plugin development in a few ways: Eliminates the need to transfer the plugin's ..."},r="Debugging mobile plugins",a={unversionedId:"api/references/mobile_plugin_debugging",id:"api/references/mobile_plugin_debugging",title:"Debugging mobile plugins",description:"Running on web Plugins can be installed from .jpl files in the web build of the mobile app. This can help with mobile plugin development in a few ways: Eliminates the need to transfer the plugin's ...",source:"@site/help/api/references/mobile_plugin_debugging.md",sourceDirName:"api/references",slug:"/api/references/mobile_plugin_debugging",permalink:"/help/api/references/mobile_plugin_debugging",draft:!1,editUrl:"https://github.com/laurent22/joplin/tree/dev/readme/api/references/mobile_plugin_debugging.md",tags:[],version:"current",frontMatter:{sidebar_label:"Debugging mobile plugins",title:"Debugging mobile plugins",description:"Running on web Plugins can be installed from .jpl files in the web build of the mobile app. This can help with mobile plugin development in a few ways: Eliminates the need to transfer the plugin's ..."},sidebar:"helpSidebar",previous:{title:"Development mode",permalink:"/help/api/references/development_mode"},next:{title:"Plugin Loading Rules",permalink:"/help/api/references/plugin_loading_rules"}},p={},s=[{value:"Running on web",id:"running-on-web",level:2},{value:"Android: Inspecting a WebView",id:"android-inspecting-a-webview",level:2},{value:"Getting console output from Joplin&#39;s logs",id:"getting-console-output-from-joplins-logs",level:2}],u={toc:s},g="wrapper";function m(e){let{components:n,...t}=e;return(0,o.kt)(g,(0,i.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"debugging-mobile-plugins"},"Debugging mobile plugins"),(0,o.kt)("div",{className:"donate-links"},(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://www.paypal.com/donate/?business=E8JMYD2LQ8MMA&no_recurring=0&item_name=I+rely+on+donations+to+maintain+and+improve+the+Joplin+open+source+project.+Thank+you+for+your+help+-+it+makes+a+difference%21&currency_code=EUR"},(0,o.kt)("img",{parentName:"a",src:"https://raw.githubusercontent.com/laurent22/joplin/dev/Assets/WebsiteAssets/images/badges/Donate-PayPal-green.svg",alt:"Donate using PayPal"}))," ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/sponsors/laurent22/"},(0,o.kt)("img",{parentName:"a",src:"https://raw.githubusercontent.com/laurent22/joplin/dev/Assets/WebsiteAssets/images/badges/GitHub-Badge.svg",alt:"Sponsor on GitHub"}))," ",(0,o.kt)("a",{parentName:"p",href:"https://www.patreon.com/joplin"},(0,o.kt)("img",{parentName:"a",src:"https://raw.githubusercontent.com/laurent22/joplin/dev/Assets/WebsiteAssets/images/badges/Patreon-Badge.svg",alt:"Become a patron"}))," ",(0,o.kt)("a",{parentName:"p",href:"https://joplinapp.org/donate/#donations"},(0,o.kt)("img",{parentName:"a",src:"https://raw.githubusercontent.com/laurent22/joplin/dev/Assets/WebsiteAssets/images/badges/Donate-IBAN.svg",alt:"Donate using IBAN"})))),(0,o.kt)("h2",{id:"running-on-web"},"Running on web"),(0,o.kt)("p",null,"Plugins can be installed from ",(0,o.kt)("inlineCode",{parentName:"p"},".jpl")," files in the ",(0,o.kt)("a",{parentName:"p",href:"https://app.joplincloud.com/"},"web build")," of the mobile app. This can help with mobile plugin development in a few ways:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Eliminates the need to transfer the plugin's built ",(0,o.kt)("inlineCode",{parentName:"li"},".jpl")," file to an Android device after every change."),(0,o.kt)("li",{parentName:"ul"},"It may be easier to inspect running plugins from a browser's development tools.")),(0,o.kt)("p",null,"To install a custom plugin on web,"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Build your plugin (run ",(0,o.kt)("inlineCode",{parentName:"li"},"npm run dist")," from the plugin's directory)."),(0,o.kt)("li",{parentName:"ol"},"Open ",(0,o.kt)("a",{parentName:"li",href:"https://app.joplincloud.com/"},"web build")," of Joplin mobile."),(0,o.kt)("li",{parentName:"ol"},'Go to "Configuration" ',">",' "Plugins" ',">",' "Enable plugin support" ',">",' "Advanced".'),(0,o.kt)("li",{parentName:"ol"},'Click "Install from file".'),(0,o.kt)("li",{parentName:"ol"},"Navigate to the base directory of your plugin."),(0,o.kt)("li",{parentName:"ol"},"Open the ",(0,o.kt)("inlineCode",{parentName:"li"},"publish/")," folder."),(0,o.kt)("li",{parentName:"ol"},"Select the ",(0,o.kt)("inlineCode",{parentName:"li"},".jpl")," file.")),(0,o.kt)("p",null,"Your plugin should now be loaded!"),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},'If you encounter an "incompatible with Joplin mobile" error, be sure that ',(0,o.kt)("inlineCode",{parentName:"p"},'"platforms": ["mobile", "desktop"]')," is included in your plugin's ",(0,o.kt)("inlineCode",{parentName:"p"},"manifest.json")," (",(0,o.kt)("a",{parentName:"p",href:"/help/api/references/plugin_manifest"},"documentation"),").")),(0,o.kt)("p",null,"After loading, plugins are run in an ",(0,o.kt)("inlineCode",{parentName:"p"},"<iframe>")," with an ",(0,o.kt)("inlineCode",{parentName:"p"},"about:srcdoc")," URL. To view the plugin's console output and interact with global plugin variables (e.g. ",(0,o.kt)("inlineCode",{parentName:"p"},"joplin.commands"),"),"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Open your browser's development tools.",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"On most desktop browsers, this can be done by pressing ",(0,o.kt)("kbd",null,"F12"),"."),(0,o.kt)("li",{parentName:"ul"},"The following steps were tested on Firefox, Chrome, and Safari desktop."))),(0,o.kt)("li",{parentName:"ol"},'Click on the "Console" tab.'),(0,o.kt)("li",{parentName:"ol"},"To run JavaScript in the context of your plugin, ",(0,o.kt)("a",{parentName:"li",href:"https://developer.chrome.com/docs/devtools/console/reference#context"},"select its JavaScript context"),".",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"The JavaScript context will be named ",(0,o.kt)("inlineCode",{parentName:"li"},"about:srcdoc"),"."),(0,o.kt)("li",{parentName:"ul"},"If using Chrome's DevTools, the ",(0,o.kt)("a",{parentName:"li",href:"https://developer.chrome.com/docs/devtools/console/utilities#debug-function"},(0,o.kt)("inlineCode",{parentName:"a"},"debug"))," and other console utility function may be helpful.")))),(0,o.kt)("h2",{id:"android-inspecting-a-webview"},"Android: Inspecting a WebView"),(0,o.kt)("p",null,"On mobile, all plugins run in ",(0,o.kt)("inlineCode",{parentName:"p"},"iframe"),"s within a ",(0,o.kt)("inlineCode",{parentName:"p"},"WebView"),"."),(0,o.kt)("p",null,"On Android, it's possible to inspect this ",(0,o.kt)("inlineCode",{parentName:"p"},"WebView")," with Google Chrome's development tools. To do this,"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},'Enable plugin WebView debugging. To do this, go to "Configuration" ',">",' "Plugins" ',">",' "Advanced settings" and enable "Plugin webview debugging".'),(0,o.kt)("li",{parentName:"ol"},"Restart Joplin."),(0,o.kt)("li",{parentName:"ol"},"Follow the ",(0,o.kt)("a",{parentName:"li",href:"https://developer.chrome.com/docs/devtools/remote-debugging/"},"Chrome devtools instructions for debugging Android devices"),".")),(0,o.kt)("h2",{id:"getting-console-output-from-joplins-logs"},"Getting console output from Joplin's logs"),(0,o.kt)("p",null,"By default, messages logged with ",(0,o.kt)("inlineCode",{parentName:"p"},"console.info"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"console.warn"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"console.error")," are added to Joplin's logs. To view these logs,"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Open Joplin's log screen (Configuration ",">"," Tools ",">"," Logs)."),(0,o.kt)("li",{parentName:"ol"},'Click "Search".'),(0,o.kt)("li",{parentName:"ol"},'A search box labeled "filter" should be available. Enter your plugin\'s ID (or a large part of it).')),(0,o.kt)("p",null,"If Joplin is running in development mode, messages logged with ",(0,o.kt)("inlineCode",{parentName:"p"},"console.log")," are also added to Joplin's logs."))}m.isMDXComponent=!0}}]);